# Tests de la aplicación Gramola de esipotify
### Test 1: Buscar y añadir una canción a la cola de reproducción
- #### Assertions:
- La canción "Africa" de TOTO se ha añadido correctamente a la cola de reproducción y queda registrada en la base de datos de la aplicación.
- #### Precondiciones:
- El usuario debe tener una cuenta en la aplicación Gramola con correo"
- El usuario debe haber obtenido el token de Spotify en otro navegador antes de ejecutar el test, y debe poner este token en el código del test para que se almacene en sessionStorage.
- #### Pasos que realiza el test:
0. Abrir la aplicación Gramola en http://127.0.0.1:4200
1. Clic en "Iniciar sesión" (<a _ngcontent-ng-c2585738336="" onclick="location.href='/login'" class="btn secondary">Iniciar sesión</a>)
2. Escribir correo "tuCorreo@gmail.com" (<input _ngcontent-ng-c2578765774="" type="email" id="email" formcontrolname="email" required="" class="form-control ng-pristine ng-invalid ng-touched">)
3. Clic en campo contraseña (<input _ngcontent-ng-c2578765774="" type="password" id="password" formcontrolname="password" required="" class="form-control ng-pristine ng-invalid ng-touched">)
4. Escribir contraseña "tuPass1234" 
5. Clic iniciar sesión (<button _ngcontent-ng-c2578765774="" type="submit" class="btn btn-primary"> Iniciar sesión </button>)
6. Seleccionar en el slide de precios el valor 050 (<input _ngcontent-ng-c2346573742="" type="range" id="songPrice" step="10" aria-label="Precio por canción en céntimos" class="price-slider ng-valid ng-dirty ng-touched" min="0" max="500">)
7. Clic en el primer dispositivo que aparece (<div _ngcontent-ng-c2346573742="" class="devices-list"><div _ngcontent-ng-c2346573742="" role="button" tabindex="0" class="device-item selected"><span _ngcontent-ng-c2346573742="" class="device-icon material-icons">computer</span><div _ngcontent-ng-c2346573742="" class="device-details"><h4 _ngcontent-ng-c2346573742="" class="device-name">Web Player (Chrome)</h4><p _ngcontent-ng-c2346573742="" class="device-type">Computer</p></div><span _ngcontent-ng-c2346573742="" class="device-badge"><span _ngcontent-ng-c2346573742="" class="material-icons">check_circle</span> Activo</span><!--container--></div><div _ngcontent-ng-c2346573742="" role="button" tabindex="0" class="device-item"><span _ngcontent-ng-c2346573742="" class="device-icon material-icons">speaker</span><div _ngcontent-ng-c2346573742="" class="device-details"><h4 _ngcontent-ng-c2346573742="" class="device-name">Echo Dot de Juan</h4><p _ngcontent-ng-c2346573742="" class="device-type">Speaker</p></div><!--container--></div><!--container--></div>)
8. Clic en "Continuar" (<button _ngcontent-ng-c2346573742="" class="confirm-btn"> Continuar a la Gramola </button>)
9. Clic en barra de búsqueda (<input _ngcontent-ng-c3026623009="" type="text" placeholder="Buscar canciones, artistas, álbumes..." class="search-input ng-pristine ng-valid ng-touched">)
10. Escribir en barra de búsqueda una canción con el nombre completo y exacto de Spotify (p.ej."Africa")
11. Clic en buscar (<button _ngcontent-ng-c3026623009="" class="search-btn"><span _ngcontent-ng-c3026623009="" class="search-icon material-icons">search</span> Buscar </button>)
12. Tomar el primer elemento de los resultados (<div _ngcontent-ng-c3026623009="" class="tracks-list"><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851ebd6d20c0082524244ef83df" alt="Toto IV"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Africa</h4><p _ngcontent-ng-c3026623009="" class="track-artist">TOTO</p><p _ngcontent-ng-c3026623009="" class="track-album">Toto IV</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851815abe02dc1a5aa63be0ee89" alt="Waka Waka (Esto es Africa) (feat. Freshlyground)"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Waka Waka (Esto es Africa) (feat. Freshlyground)</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Shakira, Freshlyground</p><p _ngcontent-ng-c3026623009="" class="track-album">Waka Waka (Esto es Africa) (feat. Freshlyground)</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851e8dd4db47e7177c63b0b7d53" alt="Hunting High and Low"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Take on Me</h4><p _ngcontent-ng-c3026623009="" class="track-artist">a-ha</p><p _ngcontent-ng-c3026623009="" class="track-album">Hunting High and Low</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851c8e97cafeb2acb85b21a777e" alt="Synchronicity (Remastered 2003)"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Every Breath You Take</h4><p _ngcontent-ng-c3026623009="" class="track-artist">The Police</p><p _ngcontent-ng-c3026623009="" class="track-album">Synchronicity (Remastered 2003)</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851b5cfa4a9c9058bbdf3344de1" alt="Fernando Castro"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Africa</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Fernando Castro</p><p _ngcontent-ng-c3026623009="" class="track-album">Fernando Castro</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851bd086f6d98183d8d84174cab" alt="Bossa Nova Covers (Vol. 3)"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Africa</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Rio Branco</p><p _ngcontent-ng-c3026623009="" class="track-album">Bossa Nova Covers (Vol. 3)</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d000048511139c795914faeb02979767b" alt="Agotados de esperar el fin"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Africa paga</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Ilegales</p><p _ngcontent-ng-c3026623009="" class="track-album">Agotados de esperar el fin</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851585d609a2d843529e8805150" alt="Sauti"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Sauti</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Francis Mercier, Faul &amp; Wad, African Children's Choir</p><p _ngcontent-ng-c3026623009="" class="track-album">Sauti</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab6742d3000052b79116e33559e5350bb998e9d5" alt="Un Africano Por La Gran Vía [Fin de Siglo (Actuación TVE)]"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Un Africano Por La Gran Vía - Fin de Siglo (Actuación TVE)</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Radio Futura</p><p _ngcontent-ng-c3026623009="" class="track-album">Un Africano Por La Gran Vía [Fin de Siglo (Actuación TVE)]</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><div _ngcontent-ng-c3026623009="" class="track-card"><div _ngcontent-ng-c3026623009="" class="track-info"><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab6742d3000052b791c4eb0faf5a199177bdc3d7" alt="Zanmi Kanmarad"><div _ngcontent-ng-c3026623009="" class="track-details"><h4 _ngcontent-ng-c3026623009="" class="track-title">Zanmi Kanmarad</h4><p _ngcontent-ng-c3026623009="" class="track-artist">Africanism, Moonlight Benjamin, Bob Sinclar</p><p _ngcontent-ng-c3026623009="" class="track-album">Zanmi Kanmarad</p></div></div><button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button></div><!--container--></div>)
13. Clic en "Añadir a la cola" (<button _ngcontent-ng-c3026623009="" class="add-to-queue-btn"><span _ngcontent-ng-c3026623009="" class="add-icon material-icons">add</span> Añadir a Cola </button>)
14. Intro o clic en Aceptar del alert()
15. Clic en campo de número de tarjeta (<input class="InputElement is-empty Input Input--empty" autocomplete="cc-number" autocorrect="off" spellcheck="false" type="text" name="cardnumber" data-elements-stable-field-name="cardNumber" aria-required="true" inputmode="numeric" aria-label="Número de la tarjeta de crédito o débito" placeholder="Número de tarjeta" aria-invalid="false" tabindex="0" value="">)
16. Escribir 4242 4242 4242 4242 (automáticamente pasa a la fecha de caducidad)
17. Escribir 03/30 y CVV 123
18. Clic en "Completar pago..." (<button _ngcontent-ng-c766290412="" id="submit" type="submit" class="payment-submit-btn"><div _ngcontent-ng-c766290412="" id="spinner" class="spinner hidden"></div><span _ngcontent-ng-c766290412="" id="button-text">Completar pago de 0.50€</span></button>)
- Test 1: Comprobar desde el frontend que se ha añadido a la cola la canción "Africa" (<div _ngcontent-ng-c3026623009="" class="queue-item next-up"><div _ngcontent-ng-c3026623009="" class="queue-position">1</div><img _ngcontent-ng-c3026623009="" class="track-album-cover" src="https://i.scdn.co/image/ab67616d00004851ebd6d20c0082524244ef83df" alt="Toto IV"><div _ngcontent-ng-c3026623009="" class="queue-track-info"><h4 _ngcontent-ng-c3026623009="" class="track-title">Africa</h4><p _ngcontent-ng-c3026623009="" class="track-artist">TOTO</p></div><div _ngcontent-ng-c3026623009="" class="queue-status"><span _ngcontent-ng-c3026623009="" class="next-up-label">PRÓXIMA</span><!--container--><!--container--></div></div>)
- Test 2: Comprobar desde el backend que se ha registrado la transacción de la compra de la canción, con estado "completed"
- Test 3: Comprobar desde el backend que la última canción añadida a la cola de reproducción es del usuario con el correo autenticado en el test desde el navegador de selenium.